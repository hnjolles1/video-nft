<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@livepeer/video-nft</title><meta name="description" content="Documentation for @livepeer/video-nft"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@livepeer/video-nft</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> @livepeer/video-nft</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><p><a href="https://livepeer.github.io/livepeerjs/"><img src="https://user-images.githubusercontent.com/555740/117340053-78210e80-ae6e-11eb-892c-d98085fe6824.png" alt="LivepeerJS"></a></p>
<hr>

<a href="#video-nft-sdk" id="video-nft-sdk" style="color: inherit; text-decoration: none;">
  <h1>Video NFT SDK</h1>
</a>
<p><a href="https://www.npmjs.com/package/@livepeer/video-nft"><img src="https://img.shields.io/npm/v/@livepeer/video-nft.svg?style=flat-square&color=green" alt="npm"></a></p>
<p>SDK for creating Video NFT minting applications.</p>
<p>Also provides a CLI for minting an NFT in 1-command.</p>

<a href="#table-of-contents" id="table-of-contents" style="color: inherit; text-decoration: none;">
  <h2>Table of Contents</h2>
</a>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
</ul>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>

<a href="#package-managers" id="package-managers" style="color: inherit; text-decoration: none;">
  <h3>Package Managers</h3>
</a>

<a href="#yarn" id="yarn" style="color: inherit; text-decoration: none;">
  <h4>yarn</h4>
</a>
<pre><code class="language-bash"><span class="hl-0">yarn add @livepeer/video-nft</span>
</code></pre>

<a href="#npm" id="npm" style="color: inherit; text-decoration: none;">
  <h4>npm</h4>
</a>
<pre><code class="language-bash"><span class="hl-0">npm install @livepeer/video-nft</span>
</code></pre>
<p>Then the API can then be imported as a regular module:</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-2">videonft</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;@livepeer/video-nft&#39;</span><br/><br/><span class="hl-4">// To upload files from the filesystem</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">uploader</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-2">videonft</span><span class="hl-0">.</span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-7">Uploader</span><span class="hl-0">();</span><br/><span class="hl-4">// To process videos and export to IPFS</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">vodApi</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-2">videonft</span><span class="hl-0">.</span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-7">Api</span><span class="hl-0">({ </span><span class="hl-2">auth:</span><span class="hl-0"> { </span><span class="hl-2">apiKey</span><span class="hl-0"> } });</span><br/><span class="hl-4">// To mint the NFT from the IPFS files</span><br/><span class="hl-5">const</span><span class="hl-0"> { </span><span class="hl-6">chainId</span><span class="hl-0"> } = </span><span class="hl-2">ethereum</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">web3</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-2">videonft</span><span class="hl-0">.</span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-7">Web3</span><span class="hl-0">({ </span><span class="hl-2">ethereum</span><span class="hl-0">, </span><span class="hl-2">chainId</span><span class="hl-0"> });</span>
</code></pre>

<a href="#cdn" id="cdn" style="color: inherit; text-decoration: none;">
  <h3>CDN</h3>
</a>
<p>We are still working on support for injecting this SDK as a static script from a
CDN. For now we recommend using it as an ES Module as suggested above.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p>This SDK can be used both from Node.js (like in a backend) as well as the
browser, and is currently best used with the
<a href="https://polygon.technology">Polygon</a> blockchain. It consists of a couple
different modules which are all included in the <code>videonft</code> object.</p>

<a href="#modules" id="modules" style="color: inherit; text-decoration: none;">
  <h3>Modules</h3>
</a>
<p>The main module is the
<a href="https://livepeer.github.io/video-nft/modules/minter.html"><code>videonft.minter</code></a>
which consists of 3 parts:</p>
<ul>
<li>The <code>Uploader</code> to send files from the local context (e.g. picked by the user
on a file picker) to the Livepeer API.</li>
<li>The <code>Api</code> component, used to interact with the Livepeer API or a proxy to it.
Abstracts the video-processing and IPFS exporting APIs for preparing the
video for an NFT.</li>
<li>The <code>Web3</code> component, used to actually mint the NFT given the IPFS URLs
obtained from the <code>Api</code> component above.</li>
</ul>
<p>The SDK also provides a couple other modules that can be useful when developing
an NFT-minting application:</p>
<ul>
<li><a href="https://livepeer.github.io/video-nft/modules/chains.html"><code>videonft.chains</code></a>:
Provides some utilities for handling different blockchains that the user
might be connected to. The SDK also has a couple of built-in chains
(basically Polygon right now) where we have pre-deployed ERC-721 smart
contracts for minting the NFTs. Check <a href="https://livepeer.github.io/video-nft/modules/chains.html">the
documentation</a> for
more information.</li>
<li><a href="https://livepeer.github.io/video-nft/modules/api.html"><code>videonft.api</code></a>: Raw
client for the Livepeer VOD API. Can be used directly if you need more control
or use the API in a different way than abstracted by the <code>minter.Api</code> helper.</li>
<li><a href="https://livepeer.github.io/video-nft/modules/transcode.html"><code>videonft.transcode</code></a>:
Provides some utilities for determining the parameters of a transcode task to
be performed with the video asset. It is also abstracted by the <code>minter.Api</code>
component through the <code>nftNormalize</code> and <code>checkNftNormalize</code> functions.</li>
</ul>

<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
  <h3>Examples</h3>
</a>
<p>We will focus on the main <code>minter</code> module here which provides the higher-level
abstractions for minting an NFT. The module has 3 main parts as shown
<a href="#modules">above</a>, the <code>Uploader</code>, <code>Api</code> and <code>Web3</code>.</p>
<p>You would normally split parts of the logic between your frontend and your
backend for different reasons like security or performance. Let&#39;s explore some
of the alternatives here.</p>

<a href="#browser-only" id="browser-only" style="color: inherit; text-decoration: none;">
  <h4>Browser-only</h4>
</a>
<p>You can use the entire SDK only from the browser. This is useful for hacking
and/or demonstrating an idea, but has some security implications. Anyone with
the proper knowledge will be able to snoop the API key from your code or the
network requests and impersonate you in the Livepeer API.</p>
<p>Being aware of these limitations, you can get started like that anyway. You will
only need to create a CORS-enabled API key in the Livepeer Video Services
dashboard. Check the documentation on <a href="https://livepeer.com/docs/guides/start-live-streaming/api-key">getting an API
key</a> for more
information.</p>
<p>The code below shows a simple example how the whole flow would look like from
the browser:</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-2">videonft</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;@livepeer/video-nft&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">apiOpts</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-2">auth:</span><span class="hl-0"> { </span><span class="hl-2">apiKey:</span><span class="hl-0"> </span><span class="hl-3">&#39;your-api-key-here&#39;</span><span class="hl-0"> },</span><br/><span class="hl-0">  </span><span class="hl-4">// defaults to current origin if not specified</span><br/><span class="hl-0">  </span><span class="hl-2">endpoint:</span><span class="hl-0"> </span><span class="hl-2">prodApiEndpoint</span><br/><span class="hl-0">};</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">chainId</span><span class="hl-0"> = </span><span class="hl-2">ethereum</span><span class="hl-0">.</span><span class="hl-2">chainId</span><span class="hl-0">; </span><span class="hl-4">// or await ethereum.request({ method: &#39;eth_chainId&#39; });</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">minter</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-2">videonft</span><span class="hl-0">.</span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-7">FullMinter</span><span class="hl-0">(</span><span class="hl-2">apiOpts</span><span class="hl-0">, { </span><span class="hl-2">ethereum</span><span class="hl-0">, </span><span class="hl-2">chainId</span><span class="hl-0"> });</span><br/><br/><span class="hl-4">// file is optional, will open a file picker if not provided.</span><br/><span class="hl-5">async</span><span class="hl-0"> </span><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-7">mintNft</span><span class="hl-0">(</span><span class="hl-2">file</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">nftInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-7">createNft</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-2">name:</span><span class="hl-0"> </span><span class="hl-3">&#39;My NFT&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">file</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">nftMetadata:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-2">description:</span><span class="hl-0"> </span><span class="hl-3">&#39;My NFT description&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-2">traits:</span><span class="hl-0"> { </span><span class="hl-3">&#39;my-custom-trait&#39;</span><span class="hl-2">:</span><span class="hl-0"> </span><span class="hl-3">&#39;my-custom-value&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">  </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-7">log</span><span class="hl-0">(</span><span class="hl-3">`minted NFT on contract </span><span class="hl-5">${</span><span class="hl-2">nftInfo</span><span class="hl-8">.</span><span class="hl-2">contractAddress</span><span class="hl-5">}</span><span class="hl-3"> with ID </span><span class="hl-5">${</span><span class="hl-2">nftInfo</span><span class="hl-8">.</span><span class="hl-2">tokenId</span><span class="hl-5">}</span><span class="hl-3">`</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">nftInfo</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code></pre>
<p>It is common to prefer more control over the individual steps of the minting
process though. You can use it to show some feedback to your user, ask for
additional information or confirmation. That same example would look like this:</p>
<pre><code class="language-ts"><span class="hl-5">async</span><span class="hl-0"> </span><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-7">mintNft</span><span class="hl-0">() {</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">file</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-2">uploader</span><span class="hl-0">.</span><span class="hl-7">pickFile</span><span class="hl-0">();</span><br/><span class="hl-0">  </span><span class="hl-5">let</span><span class="hl-0"> </span><span class="hl-2">asset</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-2">api</span><span class="hl-0">.</span><span class="hl-7">createAsset</span><span class="hl-0">(</span><span class="hl-3">&#39;My NFT&#39;</span><span class="hl-0">, </span><span class="hl-2">file</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-4">// optional, optimizes the video for the NFT</span><br/><span class="hl-0">  </span><span class="hl-2">asset</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-2">api</span><span class="hl-0">.</span><span class="hl-7">nftNormalize</span><span class="hl-0">(</span><span class="hl-2">asset</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">nftMetadata</span><span class="hl-0"> = {</span><br/><span class="hl-0">    </span><span class="hl-2">description:</span><span class="hl-0"> </span><span class="hl-3">&#39;My NFT description&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">traits:</span><span class="hl-0"> { </span><span class="hl-3">&#39;my-custom-trait&#39;</span><span class="hl-2">:</span><span class="hl-0"> </span><span class="hl-3">&#39;my-custom-value&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">ipfs</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-2">api</span><span class="hl-0">.</span><span class="hl-7">exportToIPFS</span><span class="hl-0">(</span><span class="hl-2">asset</span><span class="hl-0">.</span><span class="hl-2">id</span><span class="hl-0">, </span><span class="hl-2">nftMetadata</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">tx</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-2">web3</span><span class="hl-0">.</span><span class="hl-7">mintNft</span><span class="hl-0">(</span><span class="hl-2">ipfs</span><span class="hl-0">.</span><span class="hl-2">nftMetadataUrl</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">nftInfo</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">minter</span><span class="hl-0">.</span><span class="hl-2">web3</span><span class="hl-0">.</span><span class="hl-7">getMintedNftInfo</span><span class="hl-0">(</span><span class="hl-2">tx</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-7">log</span><span class="hl-0">(</span><span class="hl-3">`minted NFT on contract </span><span class="hl-5">${</span><span class="hl-2">nftInfo</span><span class="hl-8">.</span><span class="hl-2">contractAddress</span><span class="hl-5">}</span><span class="hl-3"> with ID </span><span class="hl-5">${</span><span class="hl-2">nftInfo</span><span class="hl-8">.</span><span class="hl-2">tokenId</span><span class="hl-5">}</span><span class="hl-3">`</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">nftInfo</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/api.html">api</a></li><li class=" tsd-kind-module"><a href="modules/chains.html">chains</a></li><li class=" tsd-kind-module"><a href="modules/index.html">index</a></li><li class=" tsd-kind-module"><a href="modules/minter.html">minter</a></li><li class=" tsd-kind-module"><a href="modules/transcode.html">transcode</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>